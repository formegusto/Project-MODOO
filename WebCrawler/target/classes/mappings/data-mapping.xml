<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="DataDAO">
	<insert id="insertData">
		<![CDATA[
			insert into data(dseq,inum,data)
			values((SELECT ifnull(max(dseq), 0) + 1 FROM data b),(SELECT ifnull(max(seq), 0) + 0 FROM info a),#{data });
		]]>
	</insert>
	<insert id="insertDataAll">
		<![CDATA[
			insert into data(dseq,inum,data)
			values(#{dseq },#{inum },#{data });
		]]>
	</insert>
	<insert id="insertDataInum">
		<![CDATA[
			insert into data(dseq,inum,data)
			values((SELECT ifnull(max(dseq), 0) + 1 FROM data b),#{inum },#{data });
		]]>
	</insert>
	<update id="updateData">
	<![CDATA[
			UPDATE data
			SET DATA=#{data }
			WHERE DSEQ=#{dseq }
	]]>
	</update>
	<delete id="deleteData">
		<![CDATA[
			DELETE FROM data
			WHERE INUM=#{inum}
		]]>
	</delete>
	<delete id="deleteDataSeq">
		<![CDATA[
			DELETE FROM data
			WHERE DSEQ=#{dseq}
		]]>
	</delete>
	<delete id="deleteDataLengthLt" parameterType="Integer">
		<![CDATA[
			DELETE FROM data
			WHERE CHAR_LENGTH(data)<#{length}
		]]>
	</delete>
	<delete id="deleteDataLengthLe" parameterType="Integer">
		<![CDATA[
			DELETE FROM data
			WHERE CHAR_LENGTH(data)<=#{length}
		]]>
	</delete>
	<delete id="deleteDataLengthGt" parameterType="Integer">
		<![CDATA[
			DELETE FROM data
			WHERE CHAR_LENGTH(data)>#{length}
		]]>
	</delete>
	<delete id="deleteDataLengthGe" parameterType="Integer">
		<![CDATA[
			DELETE FROM data
			WHERE CHAR_LENGTH(data)>=#{length}
		]]>
	</delete>
	<delete id="deleteDataLengthEq" parameterType="Integer">
		<![CDATA[
			DELETE FROM data
			WHERE CHAR_LENGTH(data)=#{length}
		]]>
	</delete>
	<delete id="deleteDataLengthNe" parameterType="Integer">
		<![CDATA[
			DELETE FROM data
			WHERE CHAR_LENGTH(data)!=#{length}
		]]>
	</delete>
	<select id="getData" resultType="data">
		<![CDATA[
			SELECT *
			FROM DATA
			WHERE INUM=#{inum}
			ORDER BY DSEQ ASC
		]]>
	</select>
	<select id="getDataDseq" resultType="data">
		<![CDATA[
			SELECT *
			FROM DATA
			WHERE DSEQ=#{dseq}
		]]>
	</select>
	<select id="getDataList" resultType="data">
		<![CDATA[
			SELECT *
			FROM DATA
			ORDER BY dseq DESC
		]]>
	</select>
	<select id="getDataStr" resultType="string">
		<![CDATA[
			SELECT data
			FROM DATA
			WHERE INUM=#{inum}
			ORDER BY dseq DESC
		]]>
	</select>
</mapper>
