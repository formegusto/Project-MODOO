<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="VisualDAO">
	<insert id="insertVisual">
	<![CDATA[
		insert into VISUAL(vseq, title, id, vtype, color)
		values ((SELECT ifnull(max(vseq), 0) + 1 FROM VISUAL a),#{title },#{id }, #{vtype }, #{color })
	]]>
	</insert>
	<insert id="insertVHI">
	<![CDATA[
		insert into VISUAL_HAVE_INFO(vhiseq,vseq,iseq,dtype)
		values ((SELECT ifnull(max(vhiseq), 0) + 1 FROM VISUAL_HAVE_INFO a),(SELECT ifnull(max(vseq), 0) + 0 FROM VISUAL b), #{iseq},#{dtype})
	]]>
	</insert>
	<select id="getVHIList" resultType="vhi">
	<![CDATA[
		SELECT *
		FROM VISUAL_HAVE_INFO
		WHERE VSEQ=#{vseq}
		ORDER BY VHISEQ DESC
	]]>
	</select>
	<select id="getVisualList" resultType="visual">
	<![CDATA[
		SELECT * 
		FROM VISUAL
		WHERE ID=#{id}
		ORDER BY vseq DESC
	]]>
	</select>
</mapper>
