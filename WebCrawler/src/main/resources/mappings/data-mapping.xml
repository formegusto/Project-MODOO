<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="DataDAO">
	<insert id="insertData">
		insert into data(dseq,inum,data)
		values((SELECT ifnull(max(dseq), 0) + 1 FROM data b),(SELECT ifnull(max(seq), 0) + 0 FROM info a),#{data });
	</insert>
	<insert id="insertDataInum">
		insert into data(dseq,inum,data)
		values((SELECT ifnull(max(dseq), 0) + 1 FROM data b),#{inum },#{data });
	</insert>
	<delete id="deleteData">
		DELETE FROM data
		WHERE INUM=#{inum}
	</delete>
	<delete id="deleteDataSeq">
		DELETE FROM data
		WHERE DSEQ=#{dseq}
	</delete>
	<select id="getData" resultType="data">
		<![CDATA[
			SELECT *
			FROM DATA
			WHERE INUM=#{inum}
		]]>
	</select>
	<select id="getDataList" resultType="data">
		<![CDATA[
			SELECT *
			FROM DATA
			ORDER BY dseq DESC
		]]>
	</select>
	<select id="getDataStr" resultType="string">
		<![CDATA[
			SELECT data
			FROM DATA
			WHERE INUM=#{inum}
			ORDER BY dseq DESC
		]]>
	</select>
</mapper>
